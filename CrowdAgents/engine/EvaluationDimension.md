# CrowdAgents 评估维度影响因素

本文档记录了六个评估维度的所有影响因素及其正负面效果。

---

## 🎯 正则化评分系统

### 核心设计理念

评分系统采用**正则化设计**，确保：
- 基准分：**0分**
- 正面因素累积上限：**+10分**
- 负面因素累积上限：**-10分**
- 最终分数范围：**0~10分**

```
最终得分 = max(0, min(10, 0 + 正面累积 - 负面累积))
```

### 频率乘数

根据触发频率，基础分会被调整：

| 频率 | 乘数 | 说明 | 示例 |
|------|------|------|------|
| high | 0.3 | 高频触发（每场战斗） | 战斗胜利、使用技能 |
| medium | 0.6 | 中频触发（每几分钟） | 长时间无升级、进度停滞 |
| low | 1.0 | 低频触发（稀有事件） | 升级、获得传说物品 |

### 累积上限

每个因素有独立的累积上限，防止单一因素过度影响评分：

```javascript
// 示例：战斗胜利
{
    "baseScore": 0.08,       // 基础分
    "frequency": "high",     // 高频 → 实际 0.08 × 0.3 = 0.024
    "maxAccumulated": 0.8    // 最多累积0.8分
}

// 示例：升级
{
    "baseScore": 0.8,        // 基础分
    "frequency": "low",      // 低频 → 实际 0.8 × 1.0 = 0.8
    "maxAccumulated": 3.2    // 最多累积3.2分
}
```

---

## 评分系数定义

### 物品稀有度系数
| 稀有度 | 系数 | 说明 |
|--------|------|------|
| common | 1.0 | 普通物品 |
| rare | 2.0 | 稀有物品（掉率 < 20%） |
| legendary | 5.0 | 传说物品（掉率 < 10%） |

### 技能多样性系数
| 情况 | 系数 | 说明 |
|------|------|------|
| 首次使用技能 | 1.5 | 新技能探索奖励 |
| 重复使用技能 | 0.1 | 技能复用衰减 |

### 战斗评价系数
| 情况 | 系数 | 说明 |
|------|------|------|
| 残血胜利（HP < 20%） | 2.0 | 高风险高回报 |
| 完美胜利（HP > 80%） | 1.0 | 稳健表现 |
| 速战速决（< 10秒） | 1.2 | 效率奖励 |

---

## 1. 🎢 刺激度 (excitement)

刺激度衡量战斗的紧张感和刺激程度，包括风险与回报的平衡、意外事件、紧张时刻等。

### 正面因素（12个）

| # | 因素ID | 因素 | 触发条件 | 基础分 | 频率 | 累积上限 |
|---|--------|------|----------|--------|------|----------|
| 1 | closeVictory | 残血胜利 | 胜利时HP < 20% | +0.8 | low | 1.6 |
| 2 | comeback | 逆转局势 | 曾低HP后获胜 | +1.0 | low | 2.0 |
| 3 | criticalHit | 暴击快感 | 玩家打出暴击 | +0.15 | high | 0.8 |
| 4 | lowHPBattle | 低血量紧张 | HP < 30% | +0.25 | medium | 1.2 |
| 5 | highDamage | 高伤害输出 | 伤害 > 怪物30%HP | +0.2 | medium | 1.0 |
| 6 | combo | 连击成功 | 连击 > 3次 | +0.12 | high | 0.6 |
| 7 | skillCombo | 技能连招 | 战斗中用3+技能 | +0.6 | low | 1.2 |
| 8 | oneHitKill | 一击必杀 | 1回合击杀 | +0.8 | low | 1.6 |
| 9 | bossFight | Boss战刺激 | 首领战斗 | +0.7 | low | 1.4 |
| 10 | highFloor | 高层挑战 | 楼层 >= 8 | +0.4 | low | 1.0 |
| 11 | perfectDodge | 完美闪避 | 战斗中闪避3+次 | +0.5 | low | 1.0 |
| 12 | firstBlood | 首杀 | 首次击杀怪物 | +0.3 | low | 0.6 |

### 负面因素（10个）

| # | 因素ID | 因素 | 触发条件 | 基础分 | 频率 | 累积上限 |
|---|--------|------|----------|--------|------|----------|
| 1 | battleTooEasy | 战斗过于简单 | 5场HP>90%胜利 | -0.25 | medium | 1.2 |
| 2 | noThrill | 长时间无紧张感 | 10场无低HP | -0.3 | medium | 1.5 |
| 3 | repetitiveSkill | 战斗节奏单调 | 同技能5+次 | -0.15 | high | 0.8 |
| 4 | criticalFrustration | 被暴击受挫 | 连续被暴击2+次 | -0.3 | medium | 1.0 |
| 5 | battleDrag | 战斗拖沓 | 战斗 > 30秒 | -0.25 | medium | 1.0 |
| 6 | unmetExpectation | 高期望未满足 | 期望>0.8且分<5 | -0.2 | low | 0.8 |
| 7 | noChallenge | 毫无挑战 | 所有战斗太简单 | -0.4 | medium | 1.5 |
| 8 | boringPattern | 枯燥模式 | 相同模式5+次 | -0.2 | medium | 0.8 |
| 9 | overwhelmingEnemy | 敌人过强 | 毫无胜算 | -0.5 | low | 1.5 |
| 10 | anticlimax | 虎头蛇尾 | Boss太简单 | -0.35 | low | 1.0 |

---

## 2. 📈 成长感 (growth)

成长感衡量玩家升级和变强的满足感，包括等级提升、属性成长、装备获取等。

### 正面因素（12个）

| # | 因素ID | 因素 | 触发条件 | 基础分 | 频率 | 累积上限 |
|---|--------|------|----------|--------|------|----------|
| 1 | levelUp | 升级 | 等级提升 | +0.8 | low | 3.2 |
| 2 | legendaryItem | 获得传说物品 | 稀有度=legendary | +1.2 | low | 2.4 |
| 3 | rareItem | 获得稀有物品 | 稀有度=rare | +0.6 | low | 2.0 |
| 4 | battleVictory | 战斗胜利 | 每次胜利 | +0.08 | high | 0.8 |
| 5 | commonItem | 获得普通物品 | 稀有度=common | +0.05 | high | 0.5 |
| 6 | forgeSuccess | 锻造成功 | 物品锻造 | +0.6 | low | 1.8 |
| 7 | quickLevelUp | 连续升级 | 5分钟内多次升级 | +0.5 | low | 1.5 |
| 8 | statGain | 属性提升 | 升级获得属性 | +0.3 | low | 1.2 |
| 9 | powerSpike | 战力飙升 | 显著变强 | +0.7 | low | 1.4 |
| 10 | unlockFeature | 解锁功能 | 新功能解锁 | +0.5 | low | 1.0 |
| 11 | achievementUnlocked | 达成成就 | 获得成就 | +0.4 | low | 0.8 |
| 12 | equipmentUpgrade | 装备升级 | 更好的装备 | +0.45 | low | 1.2 |

### 负面因素（11个）

| # | 因素ID | 因素 | 触发条件 | 基础分 | 频率 | 累积上限 |
|---|--------|------|----------|--------|------|----------|
| 1 | noUpgrade | 长时间无升级 | 5分钟无升级 | -0.3 | medium | 1.5 |
| 2 | lowDropRate | 物品掉落率低 | 2分钟无物品 | -0.25 | medium | 1.2 |
| 3 | levelStagnation | 升级停滞 | 10+场同级战斗 | -0.3 | medium | 1.5 |
| 4 | uselessLoot | 战利品无用 | 重复物品 | -0.15 | medium | 0.8 |
| 5 | progressLoss | 进度倒退 | 死亡损失进度 | -0.6 | low | 2.0 |
| 6 | battleFail | 战斗失败 | 战斗失败 | -0.15 | medium | 0.8 |
| 7 | expPenalty | 经验惩罚 | 经验减少 | -0.35 | medium | 1.2 |
| 8 | goldWasted | 金币浪费 | 花钱无收益 | -0.2 | medium | 0.6 |
| 9 | downgrade | 装备降级 | 装备变差 | -0.5 | low | 1.5 |
| 10 | noProgressionPath | 无成长路径 | 不知如何变强 | -0.4 | medium | 1.5 |
| 11 | weakReward | 奖励微薄 | 付出>回报 | -0.25 | medium | 1.0 |

---

## 3. ⏱️ 节奏感 (pacing)

节奏感衡量游戏进程的流畅度，包括战斗节奏、探索节奏、等待时间等。

### 正面因素（10个）

| # | 因素ID | 因素 | 触发条件 | 基础分 | 频率 | 累积上限 |
|---|--------|------|----------|--------|------|----------|
| 1 | quickBattle | 快速战斗 | 战斗 < 10秒 | +0.1 | high | 0.8 |
| 2 | fastFloorProgress | 楼层推进快 | 楼层 < 3分钟 | +0.5 | low | 1.5 |
| 3 | idealBattleTime | 战斗节奏好 | 5-15秒战斗 | +0.25 | medium | 1.2 |
| 4 | winStreak | 连胜节奏 | 连胜3+次 | +0.2 | medium | 1.0 |
| 5 | progressVisible | 进度可见 | 楼层推进 | +0.2 | medium | 0.8 |
| 6 | smoothTransition | 平滑过渡 | 无缝区域切换 | +0.3 | low | 0.6 |
| 7 | balancedDifficulty | 难度适中 | 难度曲线好 | +0.35 | medium | 1.0 |
| 8 | rewardingSession | 有收获的体验 | 感觉有效率 | +0.4 | low | 0.8 |
| 9 | goodRestPoint | 休息点合适 | 自然中断点 | +0.25 | low | 0.5 |
| 10 | engagingLoop | 引人入胜 | 想继续玩 | +0.3 | medium | 0.9 |

### 负面因素（10个）

| # | 因素ID | 因素 | 触发条件 | 基础分 | 频率 | 累积上限 |
|---|--------|------|----------|--------|------|----------|
| 1 | battleTooLong | 战斗过长 | 战斗 > 30秒 | -0.25 | medium | 1.2 |
| 2 | floorTooSlow | 楼层推进慢 | 楼层 > 5分钟 | -0.35 | medium | 1.5 |
| 3 | failStreak | 连续失败打断 | 连败2+次 | -0.3 | medium | 1.2 |
| 4 | deathInterrupt | 节奏被打断 | 死亡重置 | -0.5 | low | 1.5 |
| 5 | progressStall | 进度停滞 | 3分钟无推进 | -0.3 | medium | 1.2 |
| 6 | waitingTime | 等待时间 | 不必要的等待 | -0.2 | medium | 0.8 |
| 7 | repetitiveGrind | 重复刷怪 | 同动作10+次 | -0.35 | medium | 1.4 |
| 8 | pacingInconsistency | 节奏不一致 | 突兀的节奏变化 | -0.25 | medium | 1.0 |
| 9 | forcedBreak | 强制中断 | 不想停被迫停 | -0.3 | low | 0.8 |
| 10 | emptyTravel | 空虚跑图 | 走路无事发生 | -0.2 | medium | 0.6 |

---

## 4. 🎮 可玩性 (playability)

可玩性衡量游戏机制的趣味程度，包括技能多样性、策略选择空间、内容丰富度等。

### 正面因素（12个）

| # | 因素ID | 因素 | 触发条件 | 基础分 | 频率 | 累积上限 |
|---|--------|------|----------|--------|------|----------|
| 1 | newMonster | 首次遭遇怪物 | 新怪物类型 | +0.5 | low | 2.0 |
| 2 | newSkill | 首次使用技能 | 新技能使用 | +0.5 | low | 1.5 |
| 3 | newItem | 首次获得物品 | 新物品类型 | +0.35 | low | 1.5 |
| 4 | skillUse | 使用技能 | 任何技能 | +0.12 | high | 0.6 |
| 5 | forgeSuccess | 锻造成功 | 物品锻造 | +0.5 | low | 1.5 |
| 6 | diversePlaystyle | 多样化玩法 | 使用3+技能 | +0.35 | low | 1.0 |
| 7 | richContent | 内容丰富 | 怪物种类>10 | +0.3 | low | 0.8 |
| 8 | strategicChoice | 策略选择 | 有意义的选择 | +0.4 | medium | 1.2 |
| 9 | skillSynergy | 技能协同 | 技能配合 | +0.45 | low | 1.0 |
| 10 | discoveryMoment | 发现时刻 | 发现新东西 | +0.35 | low | 0.8 |
| 11 | mechanicMastery | 机制精通 | 理解机制 | +0.4 | low | 0.8 |
| 12 | buildVariety | 流派多样 | 不同流派可行 | +0.3 | low | 0.6 |

### 负面因素（10个）

| # | 因素ID | 因素 | 触发条件 | 基础分 | 频率 | 累积上限 |
|---|--------|------|----------|--------|------|----------|
| 1 | repetitiveMonster | 重复刷同一怪物 | 同怪物10+次 | -0.25 | medium | 1.5 |
| 2 | noDiscovery | 长时间无新发现 | 20秒无发现 | -0.2 | medium | 1.0 |
| 3 | monsterVarietyLow | 怪物种类太少 | 15击杀<5种类 | -0.4 | low | 1.5 |
| 4 | skillMonotony | 技能单调 | 同技能5+次 | -0.2 | medium | 1.0 |
| 5 | contentDepleted | 探索者内容匮乏 | 探索者低多样性 | -0.35 | low | 1.5 |
| 6 | uselessMechanic | 无用机制 | 机制感觉无用 | -0.3 | medium | 0.8 |
| 7 | forcedPlaystyle | 强制玩法 | 只有一种玩法 | -0.35 | medium | 1.0 |
| 8 | unclearObjective | 目标不清 | 不知道做什么 | -0.25 | medium | 0.8 |
| 9 | frustratingControl | 操作受挫 | 控制问题 | -0.3 | medium | 1.0 |
| 10 | shallowDepth | 深度不足 | 机制无深度 | -0.4 | low | 1.2 |

---

## 5. 🔄 留存预估 (retention)

留存预估衡量玩家继续游玩的意愿，包括挫败感、成就感和继续动机等。

### 正面因素（11个）

| # | 因素ID | 因素 | 触发条件 | 基础分 | 频率 | 累积上限 |
|---|--------|------|----------|--------|------|----------|
| 1 | newFloor | 推进楼层 | 进入新楼层 | +0.5 | low | 2.0 |
| 2 | milestone | 达成里程碑 | 完成重要目标 | +0.8 | low | 1.6 |
| 3 | winStreak | 连胜激励 | 连胜3+次 | +0.25 | medium | 1.0 |
| 4 | surpriseReward | 惊喜奖励 | 意外好奖励 | +0.6 | low | 1.2 |
| 5 | challengeMatched | 挑战适中 | 难度匹配 | +0.4 | medium | 1.2 |
| 6 | dailyGoal | 日常目标 | 完成目标 | +0.35 | low | 0.7 |
| 7 | socialHook | 社交钩子 | 想分享 | +0.3 | low | 0.6 |
| 8 | anticipation | 期待感 | 期待某事 | +0.25 | medium | 0.8 |
| 9 | personalBest | 个人最佳 | 新纪录 | +0.45 | low | 0.9 |
| 10 | comebackSuccess | 成功逆袭 | 从挫折中恢复 | +0.5 | low | 1.0 |
| 11 | nearMiss | 差点成功 | 差点成功想重试 | +0.3 | low | 0.6 |

### 负面因素（11个）

| # | 因素ID | 因素 | 触发条件 | 基础分 | 频率 | 累积上限 |
|---|--------|------|----------|--------|------|----------|
| 1 | death | 死亡 | 玩家死亡 | -0.8 | low | 2.0 |
| 2 | floorStuck | 卡关 | 当前楼层击杀>10n | -0.35 | medium | 1.0 |
| 3 | noLootStreak | 无掉落连击 | 连续5场无掉落 | -0.25 | medium | 0.8 |
| 4 | criticalHitReceived | 被暴击 | 暴击伤害≥15%HP或血量<30% | -0.15 | medium | 0.8 |
| 5 | battleFail | 战斗失败 | 失败且耐受性<0.5 | -0.2 | medium | 0.5 |
| 6 | lowReward | 奖励太少 | 付出>回报 | -0.2 | medium | 0.5 |
| 7 | negativeFeedback | 负反馈循环 | 连续负面体验 | -0.35 | medium | 1.0 |
| 8 | progressLoss | 进度丢失 | 死亡损失进度 | -0.4 | low | 1.0 |
| 9 | quitUrge | 想退出 | 想不玩了 | -0.3 | medium | 0.6 |
| 10 | unfairLoss | 不公平失败 | 感觉被欺骗 | -0.4 | low | 0.8 |
| 11 | hopeless | 绝望 | 无望推进 | -0.5 | low | 1.0 |

---

## 6. 🎭 代入感 (immersion)

代入感衡量玩家与游戏世界建立情感连接的程度，包括世界观呈现、探索深度、角色认同等。

### 正面因素（11个，需要游戏有剧情/世界观/NPC）

| # | 因素ID | 因素 | 触发条件 | 基础分 | 频率 | 累积上限 |
|---|--------|------|----------|--------|------|----------|
| 1 | newArea | 新区域发现 | 新楼层（有世界观） | +0.4 | low | 1.6 |
| 2 | storyEvent | 剧情片段 | 触发剧情 | +0.8 | low | 3.0 |
| 3 | loreDiscovery | 世界观揭示 | 发现世界观 | +0.6 | low | 2.4 |
| 4 | characterGrowth | 角色成长 | 升级（有剧情） | +0.35 | low | 1.0 |
| 5 | immersivePlay | 沉浸体验 | 5分钟+（有剧情） | +0.25 | low | 0.8 |
| 6 | npcInteraction | NPC交互 | 与NPC互动 | +0.5 | low | 1.5 |
| 7 | atmosphereMoment | 氛围时刻 | 沉浸式时刻 | +0.4 | low | 1.0 |
| 8 | emotionalBeat | 情感节点 | 情感共鸣 | +0.6 | low | 1.5 |
| 9 | worldConsistency | 世界一致性 | 世界逻辑自洽 | +0.3 | medium | 0.8 |
| 10 | soundDesign | 音效设计 | 好的音效 | +0.25 | medium | 0.6 |
| 11 | visualReward | 视觉奖励 | 美丽时刻 | +0.3 | low | 0.6 |

### 负面因素（10个）

| # | 因素ID | 因素 | 触发条件 | 基础分 | 频率 | 累积上限 |
|---|--------|------|----------|--------|------|----------|
| 1 | noStoryContent | 缺少剧情内容 | 游戏无剧情 | -0.25 | medium | 1.5 |
| 2 | noWorldLore | 缺少世界观 | 游戏无世界观 | -0.2 | medium | 1.2 |
| 3 | noNPCInteraction | 缺少NPC交互 | 游戏无NPC | -0.18 | medium | 1.0 |
| 4 | noShareFeature | 社交玩家无分享 | 社交玩家无功能 | -0.4 | low | 1.2 |
| 5 | immersionBreak | 沉浸感打断 | 频繁中断 | -0.25 | medium | 1.0 |
| 6 | emptyContent | 内容空洞 | 世界缺乏细节 | -0.2 | medium | 0.8 |
| 7 | plotHole | 剧情漏洞 | 故事不一致 | -0.4 | low | 1.2 |
| 8 | badDialogue | 糟糕对话 | 写作差 | -0.3 | medium | 0.8 |
| 9 | toneInconsistency | 基调不一致 | 突兀的基调转变 | -0.25 | medium | 0.8 |
| 10 | forgettableWorld | 难忘世界 | 无难忘内容 | -0.35 | low | 1.0 |

---

## 📊 统计总结

| 维度 | 正面因素 | 负面因素 | 正面累积上限总和 | 负面累积上限总和 |
|------|---------|---------|-----------------|-----------------|
| 刺激度 | 12 | 10 | 10.0 | 10.0 |
| 成长感 | 12 | 11 | 10.0 | 10.0 |
| 节奏感 | 10 | 10 | 10.0 | 10.0 |
| 可玩性 | 12 | 10 | 10.0 | 10.0 |
| 留存预估 | 11 | 11 | 10.0 | 10.0 |
| 代入感 | 11 | 10 | 10.0 | 10.0 |

> **设计原则**: 每个维度的累积上限总和**刚好等于10**，确保正则化规则严格成立。所有因素的基础分与累积上限均为**整数倍数关系**（如 0.2 × 5 = 1.0）。

---

## 🔧 基础分与累积上限规则

### 整数倍数规则

每个因素的基础分与累积上限必须满足整数倍数关系：

```
maxAccumulated = baseScore × multiplier (multiplier 必须为整数)
```

### 基础分档位

| 档位 | baseScore | 用途 |
|------|-----------|------|
| S级 | 0.5 | 重要事件（升级、死亡、传说物品） |
| A级 | 0.4 | 较重要事件 |
| B级 | 0.3 | 普通事件 |
| C级 | 0.2 | 轻微事件 |
| D级 | 0.1 | 微弱事件 |

### 倍数规则（按频率）

| 频率 | 可用倍数 | 说明 |
|------|----------|------|
| low | 2, 3, 4 | 低频事件触发少，累积上限相对高 |
| medium | 3, 4, 5 | 中频事件 |
| high | 4, 5, 6 | 高频事件触发多，需要更多次才能累积满 |

---

## 🔧 动态分数调整机制

### 正则化（累积上限）

```javascript
adjustScore(dimension, delta, factorName = null) {
    if (factorName) {
        const factorConfig = config.factors[dimension][type][factorName];
        const freqMultiplier = config.frequencyMultipliers[factorConfig.frequency];
        delta = delta * freqMultiplier;
        
        // 单因素累积上限检查
        if (accumulated + delta > maxAccumulated) {
            delta = maxAccumulated - accumulated;
        }
    }
    
    // 最终分数限制在0~10
    const newScore = Math.max(0, Math.min(10, before + delta));
}
```

### 调用示例

```javascript
// 战斗胜利（高频事件）
this.adjustScore('growth', 0.1, 'battleVictory');
// 实际效果：0.1 × 0.3 = 0.03，累积上限0.5

// 升级（低频事件）
this.adjustScore('growth', 0.5, 'levelUp');
// 实际效果：0.5 × 1.0 = 0.5，累积上限2.0
```

---

## 📋 玩家期望值配置

| 玩家类型 | 刺激度 | 成长感 | 节奏感 | 可玩性 | 留存预估 | 代入感 |
|---------|--------|--------|--------|--------|---------|--------|
| 休闲玩家 (casual) | 0.4 | 0.5 | 0.3 | 0.4 | 0.6 | 0.3 |
| 硬核玩家 (hardcore) | 0.9 | 0.7 | 0.6 | 0.9 | 0.4 | 0.2 |
| 探索玩家 (explorer) | 0.5 | 0.5 | 0.4 | 0.7 | 0.6 | 0.95 |
| 社交玩家 (social) | 0.5 | 0.5 | 0.5 | 0.5 | 0.5 | 0.4 |
| 付费玩家 (paying) | 0.6 | 0.8 | 0.5 | 0.6 | 0.6 | 0.3 |

---

## 📋 玩家敏感度配置

| 玩家类型 | 正面敏感度 | 负面敏感度 | 特点 |
|---------|-----------|-----------|------|
| 休闲玩家 (casual) | 0.5 | 1.5 | 容易受挫 |
| 硬核玩家 (hardcore) | 0.8 | 0.5 | 抗压能力强 |
| 探索玩家 (explorer) | 0.7 | 1.2 | 较容易受挫 |
| 社交玩家 (social) | 0.6 | 0.8 | 中等抗压 |
| 付费玩家 (paying) | 0.6 | 0.9 | 中等抗压 |

---

## 🎯 关键设计原则

### 1. 正则化原则
- 每个因素有独立的累积上限
- 高频事件基础分低、累积上限低
- 低频事件基础分高、累积上限高
- 最终分数限制在0~10范围

### 2. 去重原则
同一事件只在一个地方计算评分：
- **获得物品**：只在 `onItemObtain` 中计算
- 物品稀有度通过系数区分：普通1.0、稀有2.0、传说5.0

### 3. 期望匹配原则
- 高期望玩家：正面加分少，负面扣分多
- 低期望玩家：正面加分多，负面扣分少

### 4. 条件触发原则
- 代入感正面因素需要游戏确实有剧情/世界观
- 负面因素对所有人触发，但期望高的扣更多

---

## 📝 阈值定义

| 等级 | 分数范围 | 说明 |
|------|---------|------|
| 危急 | 0~3.0 | 游戏存在严重问题 |
| 警告 | 3.0~4.5 | 需要关注 |
| 良好 | 4.5~6.0 | 基本可接受 |
| 优秀 | 6.0~8.0 | 表现良好 |
| 卓越 | 8.0~10.0 | 非常出色 |
