# AIæ¸¸æˆæµ‹è¯•æ¨¡æ‹Ÿç³»ç»Ÿè®¾è®¡æ–¹æ¡ˆ

## 1. ç³»ç»Ÿæ¦‚è¿°

### 1.1 ç›®æ ‡
æ„å»ºåŸºäºAI Agentçš„æ¸¸æˆæµ‹è¯•æ¨¡æ‹Ÿç³»ç»Ÿï¼Œé€šè¿‡å¤šä¸ªå…·å¤‡ç‰¹å®šç”¨æˆ·ç”»åƒçš„Agentæ¨¡æ‹Ÿä¸åŒç±»å‹ç©å®¶ï¼Œç”Ÿæˆç¬¦åˆè¯¥ç±»å‹ç©å®¶ç‰¹å¾çš„åé¦ˆï¼Œä¸ºæ¸¸æˆè¿­ä»£æä¾›æ•°æ®é©±åŠ¨çš„æŒ‡å¯¼å»ºè®®ã€‚

### 1.2 æ ¸å¿ƒä»·å€¼
- æ›¿ä»£/è¡¥å……ä¼ ç»Ÿç¤¾åŒºå…¬å¼€æµ‹è¯•
- å¿«é€Ÿè·å–å¤šç±»å‹ç©å®¶è§†è§’çš„åé¦ˆ
- è‡ªåŠ¨ç”Ÿæˆè¿­ä»£ä¼˜å…ˆçº§å»ºè®®
- å¯è§†åŒ–å±•ç¤ºæµ‹è¯•ç»“æœ

---

## 2. ç³»ç»Ÿæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    CrowdAgents ç³»ç»Ÿæ¶æ„                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  åŸæ¸¸æˆï¼ˆæµè§ˆå™¨/Node.jsåŒç¯å¢ƒï¼‰                              â”‚
â”‚   â””â”€â”€ å…³é”®ä½ç½®æ·»åŠ  this.emit?.('eventName', data)           â”‚
â”‚                         â†“                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚              Node.js æ¨¡æ‹Ÿå¼•æ“                         â”‚   â”‚
â”‚  â”‚  GameAPI â†’ Agenté›†ç¾¤ â†’ Evaluator â†’ Analyzer â†’ Advisorâ”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                         â†“                                    â”‚
â”‚   output/report.json â†’ dashboard/index.html                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.1 æŠ€æœ¯é€‰å‹

| ç»„ä»¶ | æŠ€æœ¯ | è¯´æ˜ |
|------|------|------|
| æ¨¡æ‹Ÿå¼•æ“ | Node.js | å¤ç”¨åŸæ¸¸æˆä»£ç ï¼Œé€šè¿‡äº‹ä»¶é’©å­é‡‡é›†æ•°æ® |
| å¯è§†åŒ– | HTML + Chart.js | çº¯é™æ€ï¼Œä»»æ„è®¾å¤‡æ‰“å¼€ |
| è¾“å‡ºæ ¼å¼ | JSON | æµ‹è¯•ç»“æœæ•°æ® |

---

## 3. ç›®å½•ç»“æ„

```
CrowdAgents/
â”œâ”€â”€ engine/                    # Node.jsæ¨¡æ‹Ÿå¼•æ“
â”‚   â”œâ”€â”€ main.js               # å…¥å£æ–‡ä»¶
â”‚   â”œâ”€â”€ GameAPI.js            # æ¸¸æˆæ¥å£å±‚
â”‚   â”œâ”€â”€ AgentBase.js          # AgentåŸºç±»
â”‚   â”œâ”€â”€ agents/               # å…·ä½“Agentå®ç°
â”‚   â”‚   â”œâ”€â”€ CasualPlayer.js   # è½»åº¦ä¼‘é—²ç©å®¶
â”‚   â”‚   â”œâ”€â”€ HardcoreGamer.js  # ç¡¬æ ¸ç«æŠ€ç©å®¶
â”‚   â”‚   â”œâ”€â”€ StoryExplorer.js  # å‰§æƒ…æ¢ç´¢å‹ç©å®¶
â”‚   â”‚   â”œâ”€â”€ SocialPlayer.js   # ç¤¾äº¤äº’åŠ¨å‹ç©å®¶
â”‚   â”‚   â””â”€â”€ PayingUser.js     # ä»˜è´¹ä¹ æƒ¯å‹ç©å®¶
â”‚   â”œâ”€â”€ BehaviorEngine.js     # è¡Œä¸ºå†³ç­–å¼•æ“
â”‚   â”œâ”€â”€ Evaluator.js          # å¤šç»´è¯„ä»·è®¡ç®—
â”‚   â”œâ”€â”€ Analyzer.js           # åé¦ˆåˆ†ææ¨¡å—
â”‚   â””â”€â”€ Advisor.js            # è¿­ä»£å»ºè®®ç”Ÿæˆå™¨
â”œâ”€â”€ config/                    # é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ agents.json           # Agentç”»åƒé…ç½®
â”‚   â””â”€â”€ evaluation.json       # è¯„ä»·æ ‡å‡†é…ç½®
â”œâ”€â”€ dashboard/                 # å¯è§†åŒ–ä»ªè¡¨ç›˜
â”‚   â”œâ”€â”€ index.html            # ä»ªè¡¨ç›˜å…¥å£
â”‚   â”œâ”€â”€ styles.css            # æ ·å¼
â”‚   â””â”€â”€ app.js                # å›¾è¡¨æ¸²æŸ“
â”œâ”€â”€ output/                    # è¾“å‡ºç›®å½•
â”‚   â””â”€â”€ report.json           # æµ‹è¯•ç»“æœ
â””â”€â”€ DESIGN.md                  # æœ¬æ–‡æ¡£
```

---

## 4. äº‹ä»¶é’©å­

### 4.1 è§¦å‘æ–¹å¼

åŸæ¸¸æˆéœ€è¦åœ¨å…³é”®ä½ç½®è§¦å‘äº‹ä»¶ï¼š

```javascript
this.emit?.('eventName', data);
```

ä½¿ç”¨å¯é€‰é“¾ `?.` ç¡®ä¿æµè§ˆå™¨ç¯å¢ƒæ— å‰¯ä½œç”¨ï¼ŒAgentç³»ç»Ÿä»…åœ¨Node.jsç¯å¢ƒè¿è¡Œã€‚

### 4.2 æ ¸å¿ƒäº‹ä»¶åˆ—è¡¨

| äº‹ä»¶å | è§¦å‘æ—¶æœº | å…³é”®æ•°æ® |
|--------|----------|----------|
| battleStart | æˆ˜æ–—å¼€å§‹ | monsterId, monsterHP, floor |
| battleEnd | æˆ˜æ–—ç»“æŸ | victory, duration, rewards, playerHPLeft |
| playerDamage | ç©å®¶å—ä¼¤ | damage, currentHP, isCritical |
| monsterDamage | æ€ªç‰©å—ä¼¤ | damage, skillUsed, isCritical |
| levelUp | å‡çº§ | newLevel, statsGained |
| itemObtain | è·å–ç‰©å“ | itemId, rarity, source |
| itemUse | ä½¿ç”¨ç‰©å“ | itemId, effect |
| skillUse | ä½¿ç”¨æŠ€èƒ½ | skillId, mpCost |
| floorAdvance | æ¥¼å±‚æ¨è¿› | newFloor, timeSpent |
| playerDeath | ç©å®¶æ­»äº¡ | floor, deathCause |
| forgeSuccess | é”»é€ æˆåŠŸ | itemId, materials |

---

## 5. Agentæ¨¡å‹è®¾è®¡

### 5.1 äº”ç§ç©å®¶ç”»åƒ

| Agentç±»å‹ | ä¸­æ–‡å | æ ¸å¿ƒç‰¹å¾ | å…³æ³¨ç»´åº¦ |
|-----------|--------|----------|----------|
| CasualPlayer | è½»åº¦ä¼‘é—²ç©å®¶ | æ—¶é—´å°‘ã€æ±‚æ”¾æ¾ã€æ€•æŒ«è´¥ | æ˜“ä¸Šæ‰‹æ€§ã€èŠ‚å¥ã€å¥–åŠ±é¢‘ç‡ |
| HardcoreGamer | ç¡¬æ ¸ç«æŠ€ç©å®¶ | è¿½æ±‚æŒ‘æˆ˜ã€æ·±ç©¶æœºåˆ¶ã€æ¯”æ‹¼æ’å | æ·±åº¦ã€éš¾åº¦ã€å¹³è¡¡æ€§ |
| StoryExplorer | å‰§æƒ…æ¢ç´¢å‹ç©å®¶ | é‡ä½“éªŒã€çˆ±æ”¶é›†ã€å…³æ³¨ä¸–ç•Œè§‚ | å†…å®¹ä¸°å¯Œåº¦ã€æ¢ç´¢è‡ªç”±åº¦ |
| SocialPlayer | ç¤¾äº¤äº’åŠ¨å‹ç©å®¶ | é‡äº¤æµã€çˆ±åˆ†äº«ã€ç»„é˜Ÿåå¥½ | ç¤¾äº¤åŠŸèƒ½ã€åˆä½œç©æ³• |
| PayingUser | ä»˜è´¹ä¹ æƒ¯å‹ç©å®¶ | æ„¿ä»˜è´¹ã€æ±‚æ•ˆç‡ã€é‡ä»·å€¼æ„Ÿ | ä»˜è´¹ä½“éªŒã€æ€§ä»·æ¯” |

### 5.2 ç”»åƒå‚æ•°ä½“ç³»

```
personality (æ€§æ ¼ç‰¹å¾)     å½±å“æƒ…æ„Ÿååº”
â”œâ”€ patience              è€å¿ƒåº¦      0-1
â”œâ”€ frustrationTolerance  æŒ«è´¥å®¹å¿    0-1
â”œâ”€ explorationDesire     æ¢ç´¢æ¬²æœ›    0-1
â”œâ”€ competitionDrive      ç«äº‰é©±åŠ¨    0-1
â”œâ”€ riskAppetite          å†’é™©å€¾å‘    0-1
â””â”€ persistence           åšæŒåº¦      0-1

preferences (æ¸¸æˆåå¥½)     å½±å“å†³ç­–æƒé‡
â”œâ”€ sessionLength         å•å±€æ—¶é•¿åå¥½  short/medium/long
â”œâ”€ difficultyPreference  éš¾åº¦åå¥½      easy/normal/hard
â”œâ”€ combatVsExplore       æˆ˜æ–—vsæ¢ç´¢   0-1 (0=çº¯æˆ˜æ–—)
â”œâ”€ grindTolerance        åˆ·æ€ªå®¹å¿åº¦  0-1
â”œâ”€ rewardSensitivity     å¥–åŠ±æ•æ„Ÿåº¦  0-1
â””â”€ immersionNeed         æ²‰æµ¸éœ€æ±‚    0-1

behaviorPatterns (è¡Œä¸ºæ¨¡å¼) å½±å“å…·ä½“è¡ŒåŠ¨
â”œâ”€ playFrequency         æ¸¸ç©é¢‘ç‡
â”œâ”€ avgSessionMinutes     å¹³å‡å•å±€æ—¶é•¿
â”œâ”€ quitThreshold         é€€å‡ºé˜ˆå€¼æ¡ä»¶
â”œâ”€ decisionSpeed         å†³ç­–é€Ÿåº¦    0-1 (é«˜=å¿«é€Ÿå†³ç­–)
â””â”€ resourceConservation  èµ„æºèŠ‚çº¦å€¾å‘ 0-1

skillProfile (èƒ½åŠ›ç”»åƒ)    å½±å“æ“ä½œæ•ˆæœ
â”œâ”€ gameSense             æ¸¸æˆç†è§£    0-1
â”œâ”€ reactionSpeed         ååº”é€Ÿåº¦    0-1
â”œâ”€ strategicThinking     ç­–ç•¥æ€ç»´    0-1
â””â”€ adaptability          é€‚åº”èƒ½åŠ›    0-1
```

### 5.3 Agentè¡Œä¸ºå·®å¼‚

| å†³ç­–å› ç´  | ä¼‘é—² | ç¡¬æ ¸ | æ¢ç´¢ | ç¤¾äº¤ | ä»˜è´¹ |
|----------|------|------|------|------|------|
| ç”Ÿå­˜ä¼˜å…ˆ | é«˜ | ä½ | ä¸­ | ä¸­ | ä¸­ |
| æ•ˆç‡ä¼˜å…ˆ | ä½ | é«˜ | ä½ | ä¸­ | é«˜ |
| æ¢ç´¢ä¼˜å…ˆ | ä¸­ | ä¸­ | é«˜ | ä½ | ä½ |
| é£é™©åå¥½ | ä½ | é«˜ | ä¸­ | ä¸­ | ä¸­ |
| èµ„æºèŠ‚çº¦ | é«˜ | ä½ | ä¸­ | ä¸­ | ä½ |

### 5.4 ç”»åƒç¤ºä¾‹ï¼ˆä¼‘é—²ç©å®¶ï¼‰

```json
{
    "id": "casual_01",
    "name": "ä¼‘é—²å°æ˜",
    "type": "casual",
    "avatar": "ğŸ®",
    "personality": {
        "patience": 0.35,
        "frustrationTolerance": 0.25,
        "explorationDesire": 0.4,
        "competitionDrive": 0.15,
        "riskAppetite": 0.25,
        "persistence": 0.3
    },
    "preferences": {
        "sessionLength": "short",
        "difficultyPreference": "easy",
        "combatVsExplore": 0.45,
        "grindTolerance": 0.25,
        "rewardSensitivity": 0.85,
        "immersionNeed": 0.4
    },
    "behaviorPatterns": {
        "playFrequency": "å¶å°”",
        "avgSessionMinutes": 15,
        "quitThreshold": { "consecutiveFails": 2 },
        "decisionSpeed": 0.5,
        "resourceConservation": 0.75
    },
    "skillProfile": {
        "gameSense": 0.35,
        "reactionSpeed": 0.4,
        "strategicThinking": 0.25,
        "adaptability": 0.35
    }
}
```

**å…³é”®å‚æ•°è¯´æ˜**ï¼š
- `frustrationTolerance` ä½(0.25)ï¼šå®¹æ˜“æŒ«è´¥ï¼Œéœ€è¦ä¿æŠ¤æœºåˆ¶
- `quitThreshold` 2æ¬¡ï¼šè¿ç»­å¤±è´¥2æ¬¡å¯èƒ½é€€å‡º
- `rewardSensitivity` é«˜(0.85)ï¼šå¯¹å¥–åŠ±æ•æ„Ÿï¼Œéœ€è¦é¢‘ç¹åé¦ˆ

---

## 6. å¤šç»´è¯„ä»·çŸ©é˜µä½“ç³»

### 6.1 è¯„ä»·çŸ©é˜µç»“æ„

```
              åˆºæ¿€åº¦  æˆé•¿æ„Ÿ  èŠ‚å¥æ„Ÿ  å¯ç©æ€§  ç•™å­˜é¢„ä¼°  ä»£å…¥æ„Ÿ
ä¼‘é—²ç©å®¶      1.03    1.49    0.30    0.25    1.51     0.00
ç¡¬æ ¸ç©å®¶      1.88    1.66    0.42    0.00    0.00     0.00
æ¢ç´¢ç©å®¶      1.94    1.24    0.05    0.35    0.45     0.00
ç¤¾äº¤ç©å®¶      1.84    1.26    0.00    0.09    0.55     0.00
ä»˜è´¹ç©å®¶      1.93    1.23    0.00    0.50    0.63     0.00
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
å‡å€¼         1.57    1.15    0.14    0.44    0.29     0.00
```

### 6.2 è¯„ä»·ç»´åº¦å®šä¹‰

| ç»´åº¦ID | åç§° | å®šä¹‰ | æµ‹é‡æŒ‡æ ‡ |
|--------|------|------|----------|
| excitement | åˆºæ¿€åº¦ | æˆ˜æ–—çš„ç´§å¼ æ„Ÿå’Œåˆºæ¿€ç¨‹åº¦ | HPå±é™©æ¬¡æ•°ã€æš´å‡»/é—ªé¿ç­‰ |
| growth | æˆé•¿æ„Ÿ | å‡çº§å’Œå˜å¼ºçš„æ»¡è¶³æ„Ÿ | å‡çº§é¢‘ç‡ã€è£…å¤‡è·å– |
| pacing | èŠ‚å¥æ„Ÿ | æ¸¸æˆè¿›ç¨‹çš„æµç•…åº¦ | æˆ˜æ–—é—´éš”ã€æ¨è¿›é€Ÿåº¦ |
| playability | å¯ç©æ€§ | æ¸¸æˆæœºåˆ¶çš„è¶£å‘³ç¨‹åº¦ | æŠ€èƒ½ä½¿ç”¨å¤šæ ·æ€§ |
| retention | ç•™å­˜é¢„ä¼° | ç©å®¶ç»§ç»­æ¸¸ç©çš„æ„æ„¿ | æ­»äº¡æ¬¡æ•°ã€å¼ƒæ¸¸å€¾å‘ |
| immersion | ä»£å…¥æ„Ÿ | ä¸æ¸¸æˆä¸–ç•Œå»ºç«‹æƒ…æ„Ÿè¿æ¥ | ä¸–ç•Œè§‚å‘ˆç°ã€æ¢ç´¢æ·±åº¦ |

### 6.3 Agentä¸ªæ€§åŒ–æƒé‡

ä¸åŒAgentç±»å‹å¯¹å„ç»´åº¦çš„æ•æ„Ÿåº¦ä¸åŒï¼š

| ç»´åº¦ | ä¼‘é—² | ç¡¬æ ¸ | æ¢ç´¢ | ç¤¾äº¤ | ä»˜è´¹ |
|------|------|------|------|------|------|
| excitement | 0.6 | 1.5 | 0.7 | 0.8 | 1.0 |
| growth | 1.2 | 0.8 | 1.0 | 0.9 | 1.5 |
| pacing | 1.5 | 0.6 | 0.8 | 1.0 | 1.2 |
| playability | 0.8 | 1.5 | 1.2 | 0.7 | 0.8 |
| retention | 1.0 | 0.8 | 1.3 | 0.6 | 1.0 |
| immersion | 0.7 | 0.5 | 1.5 | 1.0 | 0.6 |

### 6.4 è¯„åˆ†è®¡ç®—æµç¨‹

```
æ¸¸æˆäº‹ä»¶ â†’ åŒ¹é…å› ç´ è§„åˆ™ â†’ åº”ç”¨é¢‘ç‡ä¹˜æ•° â†’ æ­£åˆ™åŒ–æ£€æŸ¥ â†’ ç´¯åŠ ç»´åº¦åˆ†æ•°
```

**é¢‘ç‡ä¹˜æ•°**ï¼š
| é¢‘ç‡ | ä¹˜æ•° | è¯´æ˜ | å…¸å‹å› ç´  |
|------|------|------|----------|
| high | 0.3 | é«˜é¢‘è§¦å‘ | æˆ˜æ–—èƒœåˆ©ã€æ™®é€šæ”»å‡» |
| medium | 0.6 | ä¸­é¢‘è§¦å‘ | é•¿æ—¶é—´æ— å‡çº§ |
| low | 1.0 | ä½é¢‘è§¦å‘ | å‡çº§ã€è·å¾—ä¼ è¯´ç‰©å“ |

**ç´¯ç§¯ä¸Šé™**ï¼šæ¯ä¸ªå› ç´ æœ‰ç´¯ç§¯ä¸Šé™ï¼Œé˜²æ­¢å•ä¸€å› ç´ è¿‡åº¦å½±å“è¯„åˆ†ã€‚

**åŸºå‡†åˆ†**ï¼šå„ç»´åº¦ä»0å¼€å§‹ï¼Œæ ¹æ®äº‹ä»¶ç´¯åŠ ï¼ŒèŒƒå›´0~10ã€‚

### 6.5 ç»´åº¦è¯„åˆ†å› ç´ ç¤ºä¾‹

| ç»´åº¦ | æ­£é¢å› ç´  | è´Ÿé¢å› ç´  |
|------|----------|----------|
| excitement | é™©èƒœ(+0.8)ã€æš´å‡»(+0.15) | æˆ˜æ–—å¤ªç®€å•(-0.25) |
| growth | å‡çº§(+1.0)ã€ç¨€æœ‰æ‰è½(+1.5) | é•¿æ—¶é—´æ— æå‡(-0.3) |
| pacing | å¿«é€Ÿæˆ˜æ–—(+0.3) | è¿›åº¦åœæ»(-0.5) |
| playability | ä½¿ç”¨æ–°æŠ€èƒ½(+0.6)ã€é”»é€ (+0.8) | é‡å¤æ“ä½œ(-0.5) |
| retention | åˆ°è¾¾æ–°æ¥¼å±‚(+0.7) | æ­»äº¡(-1.0)ã€è¿ç»­æ­»äº¡(-0.5) |
| immersion | é¦–æ¬¡é‡åˆ°æ€ªç‰©(+0.8) | é‡å¤åˆ·æ€ª(-0.3) |

---

## 7. æ¸¸æˆæ¥å£å±‚

### 7.1 GameAPI æ ¸å¿ƒæ¥å£

GameAPIç»§æ‰¿EventEmitterï¼Œä½œä¸ºAgentä¸åŸæ¸¸æˆä¹‹é—´çš„æ¡¥æ¢ï¼š

**çŠ¶æ€æŸ¥è¯¢**ï¼š`getState()` è¿”å›ç©å®¶ã€æ¥¼å±‚ã€æ€ªç‰©ã€èƒŒåŒ…ç­‰çŠ¶æ€

**è¡ŒåŠ¨æ¥å£**ï¼š
| æ–¹æ³• | è¯´æ˜ |
|------|------|
| explore() | è§¦å‘æˆ˜æ–— |
| attack() | æ™®é€šæ”»å‡» |
| defend() | é˜²å¾¡ï¼ˆæ•Œäººä»ä¼šæ”»å‡»ï¼‰ |
| useSkill(skillId) | ä½¿ç”¨æŠ€èƒ½ |
| usePotion() | ä½¿ç”¨è¯æ°´ |
| nextFloor() | æ¨è¿›æ¥¼å±‚ |
| forgeItem(category, itemId) | é”»é€ è£…å¤‡ |

### 7.2 defend() æ–¹æ³•è¯´æ˜

`defend()` æ˜¯ä¼‘é—²ç©å®¶è¡Œä¸ºçš„é‡è¦ç»„æˆéƒ¨åˆ†ï¼š

```javascript
defend() {
    if (!this.inBattle || !this.monster) return;
    this.battleTurns++;
    this.enemyAttack();  // ç©å®¶é˜²å¾¡æ—¶ï¼Œæ•Œäººä»ä¼šæ”»å‡»
}
```

å½“ä¼‘é—²ç©å®¶HP < 30%ä¸”æ²¡æœ‰è¯æ°´æ—¶ï¼Œä¼šé€‰æ‹©é˜²å¾¡ï¼š
- ç©å®¶ä¸æ”»å‡»æ€ªç‰©
- æ€ªç‰©ä»ä¼šæ”»å‡»ç©å®¶
- æˆ˜æ–—ç»§ç»­è¿›è¡Œï¼Œä¸ä¼šå¡æ­»

---

## 8. åé¦ˆåˆ†æä¸å»ºè®®

### 8.1 åˆ†ææµç¨‹

```
åŸå§‹åé¦ˆ â†’ åˆ†ç±»æå– â†’ æƒ…æ„Ÿåˆ†æ â†’ ä¸»é¢˜èšç±» â†’ ç»Ÿè®¡æ±‡æ€»
```

### 8.2 åˆ†æè¾“å‡ºç»“æ„

```javascript
{
    summary: { totalAgents, totalPlayTime, totalBattles, avgScore },
    byAgentType: { casual: { score, topIssues }, ... },
    byDimension: { excitement: { avg, min, max, variance }, ... },
    commonIssues: [{ issue, count, severity }],
    recommendations: [{ priority, action }]
}
```

### 8.3 å»ºè®®ç”Ÿæˆè§„åˆ™

| ä¼˜å…ˆçº§ | è§¦å‘æ¡ä»¶ | ç¤ºä¾‹å»ºè®® |
|--------|----------|----------|
| critical | ç»´åº¦å‡å€¼ < 2 | "è°ƒæ•´æˆ˜æ–—ç³»ç»Ÿï¼Œå¢åŠ æš´å‡»ã€é—ªé¿ç­‰åˆºæ¿€æœºåˆ¶" |
| high | ç»´åº¦å‡å€¼ < 3 | "ä¼˜åŒ–æˆé•¿æ›²çº¿ï¼Œå¢åŠ ç©å®¶å˜å¼ºçš„åé¦ˆ" |
| medium | å­˜åœ¨åˆ†åŒ–é—®é¢˜ | "å¢åŠ æŠ€èƒ½å¤šæ ·æ€§" |
| low | UIç»†èŠ‚é—®é¢˜ | "ä¼˜åŒ–èƒŒåŒ…æ’åº" |

---

## 9. å¯è§†åŒ–ä»ªè¡¨ç›˜

### 9.1 é¡µé¢å¸ƒå±€

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ® CrowdAgents æµ‹è¯•ä»ªè¡¨ç›˜              [å¼€å§‹æµ‹è¯•] [å¯¼å‡ºæŠ¥å‘Š] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  AgentçŠ¶æ€å¡ç‰‡ï¼šæ˜¾ç¤ºå„Agentè¯„åˆ†å’Œè¿è¡ŒçŠ¶æ€                     â”‚
â”‚  ğŸ®ä¼‘é—²å°æ˜(0.79) âš”ï¸ç«æŠ€è¾¾äºº(0.77) ğŸ—ºï¸æ¢ç´¢è€…(0.64) ...        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  å¤šç»´é›·è¾¾å›¾ï¼šå±•ç¤ºå„Agentçš„ç»´åº¦è¯„åˆ†å¯¹æ¯”                        â”‚
â”‚  çƒ­åŠ›çŸ©é˜µå›¾ï¼šAgentÃ—ç»´åº¦çš„å®Œæ•´è¯„åˆ†çŸ©é˜µ                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  é—®é¢˜è¯Šæ–­é¢æ¿ï¼šæŒ‰ä¸¥é‡ç¨‹åº¦åˆ†ç±»æ˜¾ç¤ºé—®é¢˜                         â”‚
â”‚  ğŸ”´ åˆºæ¿€åº¦ä¸¥é‡åä½ (avg: 1.57)                               â”‚
â”‚  ğŸŸ¡ æˆé•¿æ„Ÿåä½ (avg: 1.15)                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  è¿­ä»£å»ºè®®ï¼šæŒ‰ä¼˜å…ˆçº§æ’åºçš„æ”¹è¿›å»ºè®®                             â”‚
â”‚  ğŸ”´ P0: è°ƒæ•´æˆ˜æ–—ç³»ç»Ÿï¼Œå¢åŠ æš´å‡»ã€é—ªé¿ç­‰åˆºæ¿€æœºåˆ¶                â”‚
â”‚  ğŸ”´ P0: ä¼˜åŒ–æˆé•¿æ›²çº¿ï¼Œå¢åŠ ç©å®¶å˜å¼ºçš„åé¦ˆ                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 9.2 å›¾è¡¨ç±»å‹

| å›¾è¡¨ | ç”¨é€” | æ•°æ®æ¥æº |
|------|------|----------|
| é›·è¾¾å›¾ | ç»´åº¦è¯„åˆ†å¯¹æ¯” | dimensionScores |
| çƒ­åŠ›çŸ©é˜µ | AgentÃ—ç»´åº¦çŸ©é˜µ | globalMatrix.byAgent |
| æŸ±çŠ¶å›¾ | æŒ‰ç»´åº¦å¯¹æ¯”Agent | globalMatrix.byDimension |
| é—®é¢˜é¢æ¿ | è¯Šæ–­ç»“æœ | criticalIssues |
| å»ºè®®åˆ—è¡¨ | è¿­ä»£å»ºè®® | Advisorè¾“å‡º |

---

## 10. report.json ç»“æ„

```javascript
{
    "meta": {
        "version": "1.0",
        "generatedAt": "2024-01-15T10:30:00Z",
        "totalDuration": 60000,
        "agentCount": 5
    },
    "agents": [{
        "id": "casual_01",
        "name": "ä¼‘é—²å°æ˜",
        "type": "casual",
        "playTime": 59992,
        "stats": { "battles": 132, "wins": 113, "deaths": 18, "maxFloor": 5 },
        "dimensionScores": { "excitement": 1.03, "growth": 1.49, ... },
        "overallScore": 0.79,
        "breakdown": [{ "dimension": "retention", "issue": "è¢«æš´å‡»å¯¼è‡´æŒ«è´¥", "severity": "medium" }]
    }],
    "matrix": {
        "byAgent": { "casual": {...}, "hardcore": {...}, ... },
        "byDimension": { "excitement": { "avg": 1.57, "min": 0.61, "max": 1.96 }, ... },
        "overallAvg": 0.71
    },
    "issues": [{ "dimension": "excitement", "issue": "åˆºæ¿€åº¦ä¸¥é‡åä½", "severity": "critical" }],
    "recommendations": [{ "priority": "critical", "action": "è°ƒæ•´æˆ˜æ–—ç³»ç»Ÿ..." }]
}
```

---

## 11. å®ç°æ­¥éª¤

| é˜¶æ®µ | çŠ¶æ€ | å†…å®¹ |
|------|------|------|
| Phase 1 | âœ… å·²å®Œæˆ | GameAPIã€AgentBaseã€BehaviorEngineã€é…ç½®æ–‡ä»¶ |
| Phase 2 | âœ… å·²å®Œæˆ | 5ç§Agentå®ç° |
| Phase 3 | âœ… å·²å®Œæˆ | Evaluatorã€Analyzerã€Advisor |
| Phase 4 | å¾…å®ç° | ä»ªè¡¨ç›˜é¡µé¢ |
| Phase 5 | è¿›è¡Œä¸­ | é›†æˆæµ‹è¯•ã€æ€§èƒ½ä¼˜åŒ– |

---

## 12. è¿è¡Œæ–¹å¼

```bash
cd CrowdAgents/engine
node main.js                    # åŸºç¡€è¿è¡Œï¼ˆ60ç§’æ¨¡æ‹Ÿï¼‰
node main.js --dashboard        # å¸¦ä»ªè¡¨ç›˜è¿è¡Œ
node main.js --duration 1800000 # æŒ‡å®šæ¨¡æ‹Ÿæ—¶é•¿ï¼ˆ30åˆ†é’Ÿï¼‰
node main.js --config custom.json # æŒ‡å®šé…ç½®æ–‡ä»¶
```

æ— å¤–éƒ¨ä¾èµ–ï¼Œä½¿ç”¨Node.jsåŸç”Ÿæ¨¡å—ã€‚

---

## 13. å·²çŸ¥é—®é¢˜ä¸ä¿®å¤

### 13.1 Evaluatoråˆ†æ•°æ˜¾ç¤ºé—®é¢˜
- **é—®é¢˜**ï¼šç»´åº¦åˆ†æ•°ä¸º0æ—¶æ˜¾ç¤ºä¸º5
- **åŸå› **ï¼šä½¿ç”¨ `||` è¿ç®—ç¬¦ï¼Œ0æ˜¯falsyå€¼
- **ä¿®å¤**ï¼šæ”¹ç”¨ `??` (nullish coalescing)
- **ä»£ç **ï¼š`scores[dim] ?? 0` æ›¿ä»£ `scores[dim] || 5`

### 13.2 ä¼‘é—²ç©å®¶æˆ˜æ–—å¡æ­»
- **é—®é¢˜**ï¼šä¼‘é—²ç©å®¶åªæ‰“8åœºæˆ˜æ–—ï¼Œå…¶ä»–ç©å®¶æ‰“140+åœº
- **åŸå› **ï¼š`case 'defend': break;` æ˜¯ç©ºæ“ä½œï¼Œæˆ˜æ–—å¡æ­»
- **ä¿®å¤**ï¼šæ·»åŠ  `defend()` æ–¹æ³•è°ƒç”¨æ•Œäººæ”»å‡»
- **ç»“æœ**ï¼šæˆ˜æ–—æ¬¡æ•°ä»8å¢åŠ åˆ°132ï¼Œè¯„åˆ†ä»0.41æå‡åˆ°0.79

---

## 14. ç›¸å…³æ–‡æ¡£

- **EvaluationDimension.md** - è¯„ä¼°ç»´åº¦è¯¦ç»†æ–‡æ¡£ï¼ŒåŒ…å«æ‰€æœ‰å› ç´ çš„å®Œæ•´å®šä¹‰
- **evaluation.json** - è¯„ä»·é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«æ­£åˆ™åŒ–è®¾ç½®å’Œå› ç´ å®šä¹‰
- **agents.json** - Agentç”»åƒé…ç½®

---

**æ–‡æ¡£ç‰ˆæœ¬**ï¼š2.1  
**æœ€åæ›´æ–°**ï¼š2024å¹´
