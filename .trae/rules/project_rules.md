# 项目规则

## 信息记录原则（AI 必读）

本文档采用**渐进式披露**架构，优化 LLM 工作效能。

### Level 1（本文件）只记录

| 类型 | 示例 |
|------|------|
| 核心命令表 | `npm run build` |
| 铁律/禁令 | 所有玩法数值必须走配置文件 |
| 常见错误诊断 | 症状→原因→修复（完整流程） |
| 代码模式 | 可直接复制的代码块 |
| 目录导航 | 功能→文件映射 |
| 触发索引表 | 指向 Level 2 的入口 |

### Level 2（`.trae/references/`）记录

| 类型 | 示例 |
|------|------|
| 详细 SOP 流程 | 完整的操作指南 |
| 边缘情况处理 | 罕见错误的诊断 |
| 完整配置示例 | 所有参数的说明 |
| 历史决策记录 | 为什么这样设计 |

---

## Reference 索引（遇到问题先查这里）

| 触发场景 | 文档 | 核心内容 |
|----------|------|---------|
| 模拟、Agent、玩家行为 | `crowdagents_info.md` | 模拟器架构、运行命令、配置说明 |

---

## 项目结构

| 目录 | 说明 |
|------|------|
| `MainGame/` | 游戏本体（前端），TypeScript + Vite |
| `crowdagents/` | CrowdAgents 模拟器 |
| `Researches/` | 游戏设计研究报告 |

**注意**：当用户提到"游戏"、"战斗系统"、"背包"、"技能"等游戏相关功能时，指的是 `MainGame/` 目录下的代码。

---

## 核心命令表

| 命令 | 场景 | 说明 |
|------|------|------|
| `cd MainGame && npm run build` | 修改代码/配置后 | TypeScript 编译 + Vite 打包 |
| `cd MainGame && npm run deploy` | build 完成后 | 复制 index.html 到根目录 |

---

## 铁律

### 版本控制
- 所有代码提交都必须通过 Trae CI/CD 流程
- 每个版本都必须有详细的修改日志（CHANGELOG.md）

### 代码风格
- 清晰的模块划分，函数/类单一职责（建议100行以内）
- 使用有意义的命名，删除未使用的代码
- 复杂逻辑添加注释，简单代码无需注释

### 游戏配置
- **所有玩法数值必须走配置文件（CONFIG），禁止代码写死**

---

## 目录映射

| 功能 | 路径 |
|------|------|
| 游戏源码 | `MainGame/src/` |
| 构建产物 | `MainGame/dist/` |
| 部署入口 | 根目录 `index.html`（引用 `./MainGame/dist/assets/`） |

---

## 修改代码前必读

| 你要改什么 | 先读这个 | 关键陷阱 |
|-----------|---------|---------|
| 游戏玩法数值 | 本文件「游戏配置」铁律 | 禁止代码写死，必须走 CONFIG |
| 模拟器相关 | `crowdagents_info.md` | 模拟器独立于前端游戏运行 |

---

## CrowdAgents 快速说明

CrowdAgents 是游戏玩家行为模拟系统，用于模拟不同类型玩家（休闲、硬核、探索、付费、社交）的游戏行为，评估游戏设计合理性。

**📖 何时读 `crowdagents_info.md`**：
- 用户提到"模拟"、"跑模拟"、"运行模拟"
- 用户提到"CrowdAgents"、"crowdagents"
- 用户提到"玩家行为"、"Agent"、"agent"
- 用户提到"评价数据"、"模拟报告"
- 任何与 CrowdAgents 相关的任务或问题

> 包含：模拟器架构、运行命令、配置说明、报告解读。

---

## Reference 触发索引

| 触发场景 | 文档 | 核心内容 |
|----------|------|---------|
| 模拟、Agent、玩家行为 | `crowdagents_info.md` | 模拟器架构、运行命令、配置说明 |
